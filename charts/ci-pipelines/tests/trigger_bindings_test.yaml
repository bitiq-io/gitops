suite: TriggerBindings per pipeline
templates:
  - templates/trigger-bindings.yaml
release:
  name: ci-pipelines
  namespace: openshift-pipelines
tests:
  - it: renders TriggerBinding for backend pipeline (toy-service)
    documentIndex: 0
    asserts:
      - isKind:
          of: TriggerBinding
      - equal:
          path: metadata.name
          value: bitiq-build-and-push-binding
      - equal:
          path: spec.params[0].name
          value: git-repo-url
      - equal:
          path: spec.params[1].name
          value: git-revision
  - it: renders TriggerBinding for nostr_threads pipeline
    documentIndex: 1
    asserts:
      - isKind:
          of: TriggerBinding
      - equal:
          path: metadata.name
          value: nostr-threads-build-and-push-binding
      - equal:
          path: spec.params[0].name
          value: git-repo-url
      - equal:
          path: spec.params[1].name
          value: git-revision
  - it: renders TriggerBinding for nostouch pipeline
    documentIndex: 2
    asserts:
      - isKind:
          of: TriggerBinding
      - equal:
          path: metadata.name
          value: nostouch-build-and-push-binding
      - equal:
          path: spec.params[0].name
          value: git-repo-url
      - equal:
          path: spec.params[1].name
          value: git-revision
  - it: renders TriggerBinding for frontend pipeline (toy-web)
    documentIndex: 3
    asserts:
      - isKind:
          of: TriggerBinding
      - equal:
          path: metadata.name
          value: bitiq-web-build-and-push-binding
      - equal:
          path: spec.params[0].name
          value: git-repo-url
      - equal:
          path: spec.params[1].name
          value: git-revision
  - it: renders TriggerBinding for signet-landing pipeline
    documentIndex: 4
    asserts:
      - isKind:
          of: TriggerBinding
      - equal:
          path: metadata.name
          value: signet-landing-build-and-push-binding
      - equal:
          path: spec.params[0].name
          value: git-repo-url
      - equal:
          path: spec.params[1].name
          value: git-revision
  - it: renders TriggerBinding for gitops maintenance pipeline
    documentIndex: 5
    asserts:
      - isKind:
          of: TriggerBinding
      - equal:
          path: metadata.name
          value: gitops-maintenance-binding
      - equal:
          path: spec.params[0].name
          value: git-revision
