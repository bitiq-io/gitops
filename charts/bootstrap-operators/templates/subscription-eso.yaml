{{- $eso := .Values.operators.externalSecrets -}}
{{- if and $eso (default true $eso.enabled) }}
apiVersion: operators.coreos.com/v1alpha1
kind: Subscription
metadata:
  name: {{ $eso.name }}
  namespace: {{ $eso.installNamespace }}
spec:
  channel: {{ $eso.channel }}
  name: {{ $eso.name }}
  source: {{ $eso.source }}
  sourceNamespace: {{ $eso.sourceNamespace }}
  installPlanApproval: {{ $eso.approval }}
  {{- if $eso.startingCSV }}
  startingCSV: {{ $eso.startingCSV | quote }}
  {{- end }}
{{- end }}
