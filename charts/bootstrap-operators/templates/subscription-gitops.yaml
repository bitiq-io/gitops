apiVersion: operators.coreos.com/v1alpha1
kind: Subscription
metadata:
  name: {{ .Values.operators.gitops.name }}
  namespace: {{ .Values.operators.gitops.installNamespace }}
spec:
  channel: {{ .Values.operators.gitops.channel }}
  name: {{ .Values.operators.gitops.name }}
  source: {{ .Values.operators.gitops.source }}
  sourceNamespace: {{ .Values.operators.gitops.sourceNamespace }}
  installPlanApproval: {{ .Values.operators.gitops.approval }}
  {{- if .Values.operators.gitops.startingCSV }}
  startingCSV: {{ .Values.operators.gitops.startingCSV | quote }}
  {{- end }}
  {{- if .Values.operators.gitops.disableDefaultInstance }}
  config:
    env:
      - name: DISABLE_DEFAULT_ARGOCD_INSTANCE
        value: "true"
  {{- end }}