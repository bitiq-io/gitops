env: local
baseDomain: apps-crc.testing
appNamespace: bitiq-local
gitopsNamespace: openshift-gitops
pipelinesNamespace: openshift-pipelines

# Repo & revision for all child Applications
repoUrl: https://github.com/bitiq-io/gitops.git
targetRevision: main

# Sample app images (Image Updater watches these)
# Use Quay for easier public tag discovery in local e2e
sampleAppImages:
  backend: quay.io/paulcapestany/toy-service
  frontend: quay.io/paulcapestany/toy-web

pipelines:
  backend:
    pipelineName: bitiq-build-and-push
    gitUrl: https://github.com/PaulCapestany/toy-service.git
    gitRevision: main
    imageRegistry: quay.io
    imageNamespace: paulcapestany
    imageName: toy-service
    eventListener: bitiq-listener
    githubSecretName: github-webhook-secret
    runTests: "true"
    testImage: registry.access.redhat.com/ubi9/go-toolset:1.20
    testScript: |
      go test ./...
  frontend:
    pipelineName: bitiq-web-build-and-push
    gitUrl: https://github.com/PaulCapestany/toy-web.git
    gitRevision: main
    imageRegistry: quay.io
    imageNamespace: paulcapestany
    imageName: toy-web
    eventListener: bitiq-web-listener
    githubSecretName: github-webhook-secret
    runTests: "true"
    testImage: quay.io/devfile/nodejs-developer:ubi8
    testScript: |
      npm ci
      npm test -- --watch=false
