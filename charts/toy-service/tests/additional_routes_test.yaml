suite: Additional toy-service routes
templates:
  - templates/route-additional.yaml
values:
  - ../values-common.yaml
release:
  name: toy-service
  namespace: bitiq-local
tests:
  - it: renders an extra route with custom host and path
    set:
      additionalRoutes:
        - name: echo-via-frontend
          host: demo.example.test
          path: /echo
          tls:
            termination: reencrypt
            insecureEdgeTerminationPolicy: Redirect
    asserts:
      - equal:
          path: metadata.name
          value: echo-via-frontend
      - equal:
          path: spec.host
          value: demo.example.test
      - equal:
          path: spec.path
          value: /echo
      - equal:
          path: spec.tls.termination
          value: reencrypt
      - equal:
          path: spec.tls.insecureEdgeTerminationPolicy
          value: Redirect
