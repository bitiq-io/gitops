enabled: false

# infraID (aka infrastructureName) is required when enabled=true and any MachineSets are enabled.
# Retrieve it from a cluster with:
#   oc get infrastructures.config.openshift.io/cluster -o jsonpath='{.status.infrastructureName}{"\n"}'
infraID: ""

machineSets: []

autoscaling:
  clusterAutoscaler:
    enabled: false
    name: default
    spec: {}

# NVIDIA GPU Operator (optional)
nvidia:
  enabled: false
  installNamespace: nvidia-gpu-operator
  createNamespace: true
  rbac:
    create: true
    # Argo CD Application controller ServiceAccount that applies this chart
    argocdNamespace: openshift-gitops
    applicationControllerServiceAccount: openshift-gitops-argocd-application-controller
  # Node Feature Discovery is required so the GPU Operator can detect GPU nodes
  # via NFD labels (e.g., feature.node.kubernetes.io/pci-10de.present=true).
  nfd:
    enabled: true
    installNamespace: openshift-nfd
    createNamespace: true
    operatorGroup:
      create: true
      name: openshift-nfd
    subscription:
      channel: stable
      name: nfd
      source: redhat-operators
      sourceNamespace: openshift-marketplace
      startingCSV: ""
      approval: Automatic
    instance:
      create: true
      apiVersion: nfd.openshift.io/v1
      name: nfd-instance
      spec:
        workerConfig:
          configData: |
            sources:
              pci:
                deviceClassWhitelist:
                  - "03"
                deviceLabelFields:
                  - "vendor"
  operatorGroup:
    create: true
    name: nvidia-gpu-operator
    # Default: single-namespace install (GPU Operator does not support AllNamespaces)
  subscription:
    channel: stable
    # Package name in OperatorHub (commonly gpu-operator-certified)
    name: gpu-operator-certified
    source: certified-operators
    sourceNamespace: openshift-marketplace
    startingCSV: ""
    approval: Automatic
  clusterPolicy:
    create: true
    apiVersion: nvidia.com/v1
    name: cluster-policy
    spec:
      hostPaths:
        rootFS: /
        driverInstallDir: /run/nvidia/driver
      operator:
        use_ocp_driver_toolkit: true
      driver:
        enabled: true
      toolkit:
        enabled: true
      devicePlugin:
        enabled: true
      gfd:
        enabled: true
      nodeStatusExporter:
        enabled: true
      dcgm:
        enabled: true
      dcgmExporter:
        enabled: true
      daemonsets:
        tolerations:
          - key: nvidia.com/gpu
            operator: Exists
            effect: NoSchedule
