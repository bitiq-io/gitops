suite: Deployment container image
templates:
  - templates/deployment.yaml
values:
  - ../values-common.yaml
release:
  name: toy-web
  namespace: bitiq-local
tests:
  - it: renders deployment with default image
    asserts:
      - equal:
          path: spec.template.spec.containers[0].image
          value: quay.io/paulcapestany/toy-web:v0.0.0-commit.0000000
  - it: allows overriding image tag
    set:
      image:
        repository: quay.io/example/frontend
        tag: v1.2.3-commit.abc1234
    asserts:
      - equal:
          path: spec.template.spec.containers[0].image
          value: quay.io/example/frontend:v1.2.3-commit.abc1234
